/**
 * Show an add block modal instead of doing it on a separate page.
 *
 * @module     core/addblockmodal
 * @copyright  2016 Damyon Wiese <damyon@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("core/addblockmodal",["jquery","core/modal_factory","core/templates","core/str","core/notification"],(function($,ModalFactory,Templates,Str,Notification){return{init:function(context){var addblocklink=$("[data-key=addblock]"),titlerequests=context.blocks.map((function(blockName){return{key:"pluginname",component:"block_"+blockName}})),bodyPromise=Str.get_strings(titlerequests).then((function(titles){return titles.map((function(title,index){return{name:context.blocks[index],title:title}}))})).then((function(blocks){return context.blocks=blocks,Templates.render("core/add_block_body",context)})).fail(Notification.exception),titlePromise=Str.get_string("addblock").fail(Notification.exception);ModalFactory.create({title:titlePromise,body:bodyPromise,type:"CANCEL"},addblocklink)}}}));

//# sourceMappingURL=addblockmodal.min.js.map